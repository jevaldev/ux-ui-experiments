<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Animated menu</title>
  <link rel="stylesheet" href="style.css"
</head>
<body>
  <header>
    <h1>Animated menu</h1>
    
    <div>
      <button id="toggle-theme">
          <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="currentColor"  class="icon icon-tabler icons-tabler-filled icon-tabler-moon dark-theme-icon hidden-icon-theme"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 1.992a10 10 0 1 0 9.236 13.838c.341 -.82 -.476 -1.644 -1.298 -1.31a6.5 6.5 0 0 1 -6.864 -10.787l.077 -.08c.551 -.63 .113 -1.653 -.758 -1.653h-.266l-.068 -.006l-.06 -.002z" /></svg>

           <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="currentColor"  class="icon icon-tabler icons-tabler-filled icon-tabler-sun light-theme-icon hidden-icon-theme"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 19a1 1 0 0 1 .993 .883l.007 .117v1a1 1 0 0 1 -1.993 .117l-.007 -.117v-1a1 1 0 0 1 1 -1z" /><path d="M18.313 16.91l.094 .083l.7 .7a1 1 0 0 1 -1.32 1.497l-.094 -.083l-.7 -.7a1 1 0 0 1 1.218 -1.567l.102 .07z" /><path d="M7.007 16.993a1 1 0 0 1 .083 1.32l-.083 .094l-.7 .7a1 1 0 0 1 -1.497 -1.32l.083 -.094l.7 -.7a1 1 0 0 1 1.414 0z" /><path d="M4 11a1 1 0 0 1 .117 1.993l-.117 .007h-1a1 1 0 0 1 -.117 -1.993l.117 -.007h1z" /><path d="M21 11a1 1 0 0 1 .117 1.993l-.117 .007h-1a1 1 0 0 1 -.117 -1.993l.117 -.007h1z" /><path d="M6.213 4.81l.094 .083l.7 .7a1 1 0 0 1 -1.32 1.497l-.094 -.083l-.7 -.7a1 1 0 0 1 1.217 -1.567l.102 .07z" /><path d="M19.107 4.893a1 1 0 0 1 .083 1.32l-.083 .094l-.7 .7a1 1 0 0 1 -1.497 -1.32l.083 -.094l.7 -.7a1 1 0 0 1 1.414 0z" /><path d="M12 2a1 1 0 0 1 .993 .883l.007 .117v1a1 1 0 0 1 -1.993 .117l-.007 -.117v-1a1 1 0 0 1 1 -1z" /><path d="M12 7a5 5 0 1 1 -4.995 5.217l-.005 -.217l.005 -.217a5 5 0 0 1 4.995 -4.783z" /></svg>
    </button>

    <button id="toggle-menu">
      <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-menu-2"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 6l16 0" /><path d="M4 12l16 0" /><path d="M4 18l16 0" /></svg>
    </button>
  </div>
  </header>


  <div id="menu-overlay" class="overlay hidden-menu">
    <div class="overlay-content">
      <button id="close-menu" class="close-button">
        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none"
          stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
          class="icon-tabler-x">
          <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
          <path d="M18 6l-12 12" />
          <path d="M6 6l12 12" />
        </svg>
      </button>

      <nav class="menu">
        <ul>
          <li><a href="#">Home</a></li>
          <li><a href="#">Services</a></li>
          <li><a href="#">About us</a></li>
          <li><a href="#">Contact</a></li>
        </ul>
      </nav>
    </div>
  </div>

  
  <script>
    const button = document.getElementById("toggle-theme")
    const body = document.body
    const darkThemeIcon = document.querySelector(".dark-theme-icon")
    const lightThemeIcon = document.querySelector(".light-theme-icon")

    function applyTheme(theme) {
      if (theme === "dark"){
        darkThemeIcon.classList.remove("hidden-icon-theme")
        lightThemeIcon.classList.add("hidden-icon-theme")
        body.classList.add("dark")
      } else {
        darkThemeIcon.classList.add("hidden-icon-theme")
        lightThemeIcon.classList.remove("hidden-icon-theme")
        body.classList.remove("dark")
      }
    }

    function getPreferTheme() {
      const savedTheme = localStorage.getItem("theme")
      if (savedTheme){
        return(savedTheme)
      }

      const prefersDark = window.matchMedia("(prefers-color-scheme: dark)").matches
      return prefersDark ? "dark" : "light"
    }

    applyTheme(getPreferTheme())

    button.addEventListener("click", () => {
      const currentTheme = body.classList.contains("dark") ? "dark" : "light"
      const newTheme = currentTheme === "dark" ? "light" : "dark"

      applyTheme(newTheme)
      localStorage.setItem("theme", newTheme)
    })
  </script>

  <script>
    const menuButton = document.getElementById("toggle-menu");
    const menuOverlay = document.getElementById("menu-overlay");
    const closeButton = document.getElementById("close-menu");

    function openMenu() {
      menuOverlay.classList.remove("hidden-menu");
      setTimeout(() => {
        menuOverlay.classList.add("open-menu");
      }, 10);
    }

    function closeMenu() {
      menuOverlay.classList.remove("open-menu");
      setTimeout(() => {
        menuOverlay.classList.add("hidden-menu");
      }, 300);
    }

    menuButton.addEventListener("click", openMenu);
    closeButton.addEventListener("click", closeMenu);

    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape" && menuOverlay.classList.contains("open-menu")) {
        closeMenu();
      }
    });

    menuOverlay.addEventListener("click", (e) => {
      if (e.target === menuOverlay) {
        closeMenu();
      }
    });
  </script>

</body>
</html>